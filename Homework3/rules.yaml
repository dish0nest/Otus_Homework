# Группы алертов
groups:
  # Название группы
  - name: Critical_alerts
    # Правила срабатывания
    rules:
#      # Название алерта
#      - alert: BlackboxProbeFailed
#        # Выполнение выражения для проверки
#        expr: probe_success == 0
#        # Сколько должно пройти, чтобы сработал алерт
#        for: 0m
#        # Дописываем лейбл к алерту
#        labels:
#          # Присваиваем уровень
#          severity: critical
#        #  Пишем аннотацию к алерту
#        annotations:
#          summary: Blackbox probe failed (instance {{ $labels.instance }})
#          description: "Probe failed\n  VALUE = {{ $value }}\n  LABELS = {{ $labels }}"

      - alert: CadvisorFailed
        expr: up{job="docker"} == 0
        for: 1m
        labels:
          severity: critical
        annotations:
          summary: Cadvisor not working (instance {{ $labels.instance }})
          description: "Cadvisor failed\n  VALUE = {{ $value }}\n  LABELS = {{ $labels }}"

  - name: Warning_alerts
    rules:
      - alert: NodeExporterFailed
        expr: up{instance="192.168.56.101:9100"} == 0
        for: 1m
        labels:
          severity: warning
        annotations:
          summary: Node Exporter not not working (instance {{ $labels.instance }})
          description: "Node Exporter failed\n  VALUE = {{ $value }}\n  LABELS = {{ $labels }}"

